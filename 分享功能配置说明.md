# 微信小游戏分享功能配置说明

## 问题分析

你的小游戏之前无法分享和转发的原因是：

1. **缺少分享配置**：`game.json` 中没有配置分享回调函数
2. **没有分享按钮**：用户界面中没有分享入口
3. **分享方法未实现**：虽然定义了分享方法，但配置不完整

## 已完成的修改

### 1. 配置文件修改 (`game.json`)
```json
{
  "onShareAppMessage": "onShareAppMessage",
  "onShareTimeline": "onShareTimeline"
}
```

### 2. 分享回调函数 (`js/main.js`)
```javascript
// 分享到聊天
function onShareAppMessage() {
  return {
    title: '切割投喂大作战 - 挑战你的思维能力！',
    imageUrl: 'subpackages/assets/images/menu-background.png',
    query: 'from=share'
  };
}

// 分享到朋友圈
function onShareTimeline() {
  return {
    title: '切割投喂大作战 - 挑战你的思维能力！',
    imageUrl: 'subpackages/assets/images/menu-background.png',
    query: 'from=timeline'
  };
}
```

### 3. 分享按钮 (`js/scenes/main-menu.js`)
- 在主菜单添加了"分享游戏"按钮
- 按钮样式：红色背景，白色文字
- 位置：在"帮助说明"按钮下方

## 分享功能说明

### 分享方式
1. **主动分享**：点击主菜单的"分享游戏"按钮
2. **系统分享**：长按游戏界面，选择"分享"
3. **朋友圈分享**：通过系统分享菜单分享到朋友圈

### 分享内容
- **标题**：切割投喂大作战 - 挑战你的思维能力！
- **图片**：使用主菜单背景图作为分享图片
- **参数**：携带来源标识（from=share 或 from=timeline）

## 测试方法

1. **重新编译**：修改后需要重新编译小游戏
2. **测试分享**：
   - 进入主菜单，点击"分享游戏"按钮
   - 长按游戏界面，测试系统分享
   - 测试分享到聊天和朋友圈

## 注意事项

1. **图片路径**：确保分享图片路径正确
2. **权限配置**：微信小游戏平台需要开启分享权限
3. **版本更新**：修改后需要重新提交审核

## 常见问题

### Q: 分享按钮不显示？
A: 检查按钮数组是否正确添加，确保渲染函数调用了 `drawButtons`

### Q: 分享后无法跳转？
A: 检查 `onShareAppMessage` 函数是否正确配置在 `game.json` 中

### Q: 朋友圈分享不显示？
A: 确保 `onShareTimeline` 函数配置正确，且微信平台开启了朋友圈分享权限

## 下一步

1. **重新编译**：将修改后的代码重新编译
2. **测试分享**：在微信中测试分享功能
3. **提交审核**：如果测试正常，可以提交新版本审核
